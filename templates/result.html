<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: #f4f6f8;
            display: flex;
            justify-content: center;
            padding: 50px 20px;
        }

        .container {
            background: #fff;
            padding: 30px 40px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        img {
            display: block;
            margin: 0 auto 20px auto;
            max-width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 6px;
            background: #f1f3f6;
            display: flex;
            justify-content: space-between;
        }

        /* Color code predictions */
        li.positive { background: #ffcccc; }
        li.negative { background: #ccffcc; }

        pre {
            background: #f1f3f6;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }

        a {
            display: inline-block;
            margin-top: 20px;
            text-decoration: none;
            color: #007bff;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        a:hover {
            color: #0056b3;
        }

        .report {
            background: #f1f3f6;
            padding: 15px;
            border-radius: 8px;
            white-space: pre-wrap;   /* keep line breaks */
            word-wrap: break-word;   /* wrap long words */
            line-height: 1.6;        /* improve readability */
        }

        .disclaimer {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 20px;
            margin-top: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .disclaimer strong {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;  /*sets an element's font size to be 1.1 times the font size of its parent element. 
                                Since the default browser font size is often 16px, this would make the font size 17.6px*/
        }

    </style>
</head>
<body>
    <div class="container">
        <h1>X-ray Image Analysis</h1>
        <h3>Prediction Results</h3>
        
        <img src="{{ url_for('static', filename='uploads/' + filename) }}" alt="X-ray Image"><br>

        {% if results.valid_xray is defined and not results.valid_xray %}
            <!-- Case: Not an X-ray -->
            <h3>Valid xray: {{results.valid_xray}}</h3>
            <h3 style="color:red;">{{ results.message }}</h3>
        {% else %}
            <!-- Case: Valid chest X-ray -->
            <h3>Predictions:</h3>
            <ul>
                {% for disease, res in results.items() %}
                    <li class="{{ 'positive' if res['Prediction']=='Positive' else 'negative' }}">
                        {{ disease }}: {{ res['Prediction'] }} 
                    </li>
                {% endfor %}
            </ul>
        
            <h3>Disease Explanation Report:</h3>
            <div class="report">{{ report|safe }}</div>
        {% endif %}

        <div class="disclaimer">
        <strong>⚠️ Medical Disclaimer</strong>
        <p>
            This system is for <b>educational and research purposes only</b>.  
            It should <u>not</u> be used as a substitute for professional medical advice, diagnosis, or treatment.  
            Always seek the guidance of a qualified healthcare provider with any questions regarding a medical condition.
        </p>
        </div>

        <a href="/">&#8592; Back</a>
    </div>
</body>
</html>



